<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <h:outputStylesheet library="css" name="default.css"/>
    <h:outputStylesheet library="css" name="cssLayout.css"/>
    <h:outputStylesheet library="css" name="sesion.css"/>
    <title>Información del Usuario</title>
</h:head>
<h:body>
    <h:form>
        <div class="center-content">
            <div class="avatar">
                <h:graphicImage name="images/avatar.png" alt="Avatar" />
            </div>
            <h2>Bienvenido, #{sessionScope.usuarioSesion.nombre}!</h2>
            <div class="info-container">
                <p>Nombre: #{sessionScope.usuarioSesion.nombre}
                    <p:commandButton value="Modificar" oncomplete="PF('nombreDialog').show()" />
                </p>
                <p>Correo: #{sessionScope.usuarioSesion.correo}</p>
                <p>Tipo de usuario: #{sessionScope.usuarioSesion.tipoUsuario}
                    <p:commandButton value="Modificar" oncomplete="PF('tipoUsuarioDialog').show()" />
                </p>
                <p>Fecha de inicio: #{sessionScope.usuarioSesion.fechaInicio}</p>
                <p>Fecha de fin: #{sessionScope.usuarioSesion.fechaFin}</p>
            </div>
        </div>

        <p:dialog header="Modificar Nombre de Usuario" widgetVar="nombreDialog" modal="true" position="center">
            <h:form>
                <p:inputText id="nombreUsuarioInput" value="#{modificarPerfilController.nuevoNombre}" />
                <p:commandButton value="Guardar" action="#{modificarPerfilController.modificarDatosUsuario(sessionScope.usuarioSesion.id)}" oncomplete="PF('nombreDialog').hide(); window.location.href = 'principal.xhtml';" />
            </h:form>
        </p:dialog>

        <!-- Diálogo para modificar el tipo de usuario -->
        <p:dialog header="Modificar Tipo de Usuario" widgetVar="tipoUsuarioDialog" modal="true" position="center">
            <h:form>
                <p:inputText id="tipoUsuarioInput" value="#{modificarPerfilController.nuevoTipoUsuario}" />
                <p:commandButton value="Guardar" action="#{modificarPerfilController.modificarDatosUsuario(sessionScope.usuarioSesion.id)}" oncomplete="PF('tipoUsuarioDialog').hide(); window.location.href = 'principal.xhtml';" />
            </h:form>
        </p:dialog>
    </h:form>
</h:body>
</html>