<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <h:outputStylesheet library="css" name="default.css"/>
    <h:outputStylesheet library="css" name="cssLayout.css"/>
    <h:outputStylesheet library="css" name="sesion.css"/>
    <title>Informaci√≥n del Usuario</title>
</h:head>
<h:body>
    <ui:composition template="/WEB-INF/template/platillaPerfil.xhtml">
        <ui:define name="content">
            <h:form id="mainForm" >
                <div class="center-content">
                    <div class="avatar">
                        <h:graphicImage name="images/avatar.png" alt="Avatar" />
                    </div>
                    <h2>Bienvenido, #{sessionScope.usuarioSesion.nombre}!</h2>
                    <div class="info-container">
                        <p>Nombre: #{sessionScope.usuarioSesion.nombre}</p>
                        <p>Correo: #{sessionScope.usuarioSesion.correo}</p>
                        <p>Tipo de usuario: #{sessionScope.usuarioSesion.tipoUsuario}</p>
                        <p>Fecha de inicio: #{sessionScope.usuarioSesion.fechaInicio}</p>
                        <p>Fecha de fin: #{sessionScope.usuarioSesion.fechaFin}</p>
                        <p:commandButton value="Modificar" oncomplete="PF('modificarDialog').show()" />
                    </div>
                </div>

                <p:dialog header="Modificar Datos del Usuario" widgetVar="modificarDialog" modal="true" position="center">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputLabel for="nombreUsuarioInput" value="Nombre:" />
                        <p:inputText id="nombreUsuarioInput" value="#{loginUsuarioController.nuevoNombre}" />

                        <h:outputLabel for="tipoUsuarioInput" value="Tipo de Usuario:" />
                        <p:inputText id="tipoUsuarioInput" value="#{loginUsuarioController.nuevoTipo}" />
                    </h:panelGrid>
                    <p:commandButton value="Guardar" action="#{loginUsuarioController.modificarDatosUsuario(sessionScope.usuarioSesion.id)}" oncomplete="PF('modificarDialog').hide(); window.location.href = 'principal.xhtml';" >
                        <f:param name="nombreUsuario" value="#{loginUsuarioController.nuevoNombre}" />
                    </p:commandButton>
                </p:dialog>
            </h:form>
        </ui:define>
    </ui:composition>
</h:body>
</html>
